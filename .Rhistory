renv::install(c('dplyr', 'jsonlite', 'ggplot2', 'purrr', 'stringr'))
renv::snapshot()
renv::install("usethis")
renv::status()
renv::snapshot()
renv::snapshot()
renv::install("patchwork")
#| echo: false
library(patchwork)
echart + gt
#| include: false
# Source functions and get weather data, then clean
source("functions.R")
forecast <- possibly_insistently_get_weather()
all <- clean_hourly_weather(forecast)
fri <- all[['Fri']]
full <- all[['Full']]
# Get wind chill and make decisions
chill <- fri |>
dplyr::pull(chill)
decision <- go_nogo(chill)
reason <- decide(chill)
#| echo: false
decision_df <- dplyr::tibble(Category = c("Decision", "Reason"), Value = c(decision, reason))
gt <- fri |>
dplyr::select(Chill = chill, Temp = temperature, Wind = windSpeed, Direction = windDirection, Summary = shortForecast, Time = time) |>
dplyr::mutate(dplyr::across(everything(), as.character)) |>
tidyr::pivot_longer(cols = everything(), names_to = 'Category', values_to = 'Value') |>
dplyr::bind_rows(decision_df) |>
make_gt()
#| echo: false
library(echarts4r)
mark_line <- fri |>
dplyr::pull(time)
echart <- full |>
dplyr::select(time, chill) |>
echarts4r::e_chart(time) |>
echarts4r::e_line(chill, symbol = 'none') |>
echarts4r::e_tooltip(trigger = "axis") |>
# echarts4r::e_mark_line(serie = 'time', data = list(xAxis = as.POSIXct('2024-12-11 13:00:00', format = "%Y-%m-%d %H:%M:%S")), title = "")
echarts4r::e_mark_line( data = list(xAxis = mark_line), title = "") |>
echarts4r::e_title("Wind Chill by Hour") |>
echarts4r::e_legend(show = FALSE) |>
echarts4r::e_animation(show = TRUE, duration = 2000)
#| echo: false
gt
#| echo: false
echart
#| echo: false
library(patchwork)
echart + gt
#| echo: false
library(patchwork)
echart + patchwork::wrap_table(gt)
#| echo: false
library(patchwork)
echart + patchwork::wrap_table(gt, panel = 'full', space = 'fixed')
packageVersion('patchwork')
#| echo: false
library(patchwork)
# echart + patchwork::wrap_table(gt, panel = 'full', space = 'fixed')
echart + grid::textGrob("fpp")
renv::remove("patchwork")
